#!/bin/bash

# Check for correct number of arguments
if [ "$#" -ne 1 ]; then
  echo "Usage: $0 <file>"
  exit 1
fi

# Store the file path in a variable
file="$1"

# Search for for loop pattern
if grep -q "for\s\+x\s\+in\s\+words\[i:\]" "$file"; then
sed -i 's/:#FOR LOOP//g' "$file"
sed -i 's/return x + second//g' "$file"
sed -i 'return\sx\s+\ssecond' "$file"
sed -i '/second\s=\srandom.choice(words)/d' "$file"
  
# Replace for loop with while loop
  sed -i 's/for\s\+x\s\+in\s\+words\[i:\]/while i < len(words):\n    x = words[i]\n    second = random.choice(words)\n    return x + second\n/' "$file"
  echo "Successfully replaced for loop with while loop."
else
  echo "No for loop found in the file."
fi

